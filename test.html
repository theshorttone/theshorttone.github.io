<!DOCTYPE html>
<html>
<head>
    <title>Hello Fungal Friends!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="leaflet.js"></script>

    <script src="leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="leaflet.css" />
    <link rel="stylesheet" href="MarkerCluster.css">
    <link rel="stylesheet" href="MarkerCluster.Default.css">
    
    <link rel="stylesheet" href= "style.css">
    
    <style>
        #map {height: 700px; width: 100%; }
        html, body {height: 100%; margin: 0; padding: 0;}
        #buttons {padding: 10px; background: #95d8f5;}
    </style>
</head>

<body onload="initialize()">
    
   
<div class = "title">
            <div class = "ptext">
                <span class = "border">
                    Welcome Fungal Friends!
                </span>
            </div>
        </div>


    <h1> Uh... why are we hearing more about mushrooms?</h1>
    <p>
No one wants to read a lot of text, so here is a 
        <a href = "https://www.youtube.com/watch?v=iboE8UZBgkM" > <p> video showing how cool mycorrhizal fungi are!</p> </a>
In summary, most plants need mycorhizae to help get nutients and water, while the fungi depend on trees to supply them with photosynthetic sugars. 
This map focusses on a subset of mycorhizal fungi, Ectomycorrhizae(EcM), since they produce the fuiting bodies we call mushrooms. Most fungi don't 
produce mushrooms, but since EcM do, it is easier to map their distribution than those without above ground fruting bodies. 

<h1>Fun Fact!</h1>
<p>Mushroooms are only fruiting bodies, they are like the berries of fungi which have most of their mass underground</p>

        
    </p>
    
    <h1>Ok, Mushrooms are cool, but why map it?</h1>
    <p>
          Fungi live underground, and consequently we know much less about their distribution and range. Unlike vegetation which is all over google 
        earth and ArcGIS, I struggled to find data on the distribution of Fungi. 
        
        
        As climate change and habitat fragmentation continue to threaten ecosystems worldwide, it is essential
    to improve mapping technologies to understand how ecosystems are changing. While great strides have been made with plant and animal data,
        fungal data has fallen quite far behind. Fungi are difficult to study and map becuase they spend most of their lives underground. 
    
    </p>
    
    <div id="map"></div>
    <div id="buttons">
        <button id="togglehelvella">Click to show Helvella!</button>
    </div>
     <div id="buttons">
        <button id="toggleamanita">Click to show Amanita!</button>
    </div>
    
<!--    <div id="buttons">
    <label class="switch">
        <input type="checkbox" id="toggleheatmap">
        <span class="slider round"></span>
    </label>
    <span>Toggle Heatmap</span>
</div> -->
    
    
    <script>       
var helvella_layer;
var amanita_layer
var amanitavisible = false;
var helvellavisible = false;
         var OpenTopoMap = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
            maxZoom: 17,
            attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
        });

function initialize() {
    var map = L.map('map', {
        center: [34.0522, -118.2437], 
        zoom: 8, 
        layers: [OpenTopoMap]
    });
    
 var response;
      var markers = L.markerClusterGroup();

  response = $.ajax({
  url: "amanita_data.geojson",
  dataType: "json",
  success: function (data) {
    console.log("Amanita data loaded");
    amanita_layer = L.geoJSON(data, {
      pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {
          icon: L.icon({
            iconUrl: "amanita.png",
            iconSize: [100, 120],
          })
        });
      },
      onEachFeature: function (feature, layer) {
        layer.bindPopup("<b>Mushroom common name: " + feature.properties.common_name + "</b>");
      }
    });

      markers.addLayer(amanita_layer); 

        $("#toggleamanita").click(function () {
          if (map.hasLayer(markers)) {
            map.removeLayer(markers);
          } else {
            map.addLayer(markers);
          }
        });

  },
  error: function (xhr) {
    alert(xhr.statusText);
  }
});
 var markers2 = L.markerClusterGroup();

  response = $.ajax({
  url: "Helvella_data.geojson",
  dataType: "json",
  success: function (data) {
    console.log("Helvella data loaded");
    helvella_layer = L.geoJSON(data, {
      pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {
          icon: L.icon({
            iconUrl: "helvella.png",
            iconSize: [80, 80],
          })
        });
      },
      onEachFeature: function (feature, layer) {
        layer.bindPopup("<b>Mushroom common name: " + feature.properties.common_name + "</b>");
      }
    });

      markers2.addLayer(helvella_layer); 

        $("#togglehelvella").click(function () {
          if (map.hasLayer(markers2)) {
            map.removeLayer(markers2);
          } else {
            map.addLayer(markers2);
          }
        });

  },
  error: function (xhr) {
    alert(xhr.statusText);
  }
});
    

}
 
    </script>
</body>
</html>
