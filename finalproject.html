<!DOCTYPE html>
<html>
<head>
    <title>Hello Fungal Friends!</title>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href= "style.css">
    <style>
        #map {height: 700px; width: 100%; }
        html, body {height: 100%; margin: 0; padding: 0;}
        #buttons {padding: 10px; background: #95d8f5;}
    </style>
</head>

<body onload="initialize()">
    
   
<div class = "title">
            <div class = "ptext">
                <span class = "border">
                    Welcome Fungal Friends!
                </span>
            </div>
        </div>
    
 
        
        
        
    <p>As climate change and habitat fragmentation continue to threaten ecosystems worldwide, it is essential
    to improve mapping technologies to understand how ecosystems are changing. While great strides have been made with plant and animal data,
        fungal data has fallen quite far behind. Fungi are difficult to study and map becuase they spend most of their lives underground. 
    
    </p>
    
    <div id="map"></div>
    <div id="buttons">
        <button id="togglehelvella">Click to show Helvella!</button>
    </div>
    
   <div id="buttons">
    <label class="switch">
        <input type="checkbox" id="toggleheatmap">
        <span class="slider round"></span>
    </label>
    <span>Toggle Heatmap</span>
</div>

    <script>
        
var map;
var helvella_layer;
var helvellavisible = false;
var helvella_heatmap;

function initialize() {
    map = L.map('map', {
        center: [34.0522, -118.2437], 
        zoom: 8, 
        layers: [OpenTopoMap]
    });

   var helvella_data = $.ajax({
        url: "Helvelladata.geojson",
        dataType: "json",
        success: function(data) {
            console.log("Fungi data loaded!");
            helvella_layer = L.geoJson(data, {
                onEachFeature: function(feature, layer) {
                    layer.bindPopup("<b>Mushroom common name: " + feature.properties.common_name + "</b>");
                }
            });
        },
        error: function(xhr) {
            alert(xhr.statusText);
        }
    });

    $("#toggleheatmap").click(function() {
        if (map.hasLayer(helvella_layer)) {
            map.removeLayer(helvella_layer);
        }

        if (map.hasLayer(helvella_heatmap)) {
            map.removeLayer(helvella_heatmap);
        } else {
            helvella_heatmap = L.heatLayer(helvella_data.features.map(function(feature) {
                return [feature.geometry.coordinates[1], feature.geometry.coordinates[0]];
            }), { radius: 20 });

            helvella_heatmap.addTo(map);
        }
    });
}

    </script>
</body>
</html>
